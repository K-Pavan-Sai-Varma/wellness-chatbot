<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Knowledge Base | Health Assistant</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background:#f0f4f5; font-family:'Poppins',sans-serif; }
    .sidebar {
      width:220px; height:100vh; position:fixed; left:0; top:0;
      background:#4CAF50; color:white; padding:20px;
      display:flex; flex-direction:column; gap:15px;
    }
    .sidebar a { color:white; text-decoration:none; display:block; padding:10px 15px; border-radius:8px; }
    .sidebar a:hover, .sidebar a.active { background:#388E3C; }
    .main { margin-left:240px; padding:20px; }
    .btn-custom { background:#4CAF50; color:white; }
    .btn-custom:hover { background:#43a047; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h4><i class="bi bi-person-lock"></i> Admin Panel</h4>
    <a href="/admin/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a>
    <a href="/admin/knowledge" class="active"><i class="bi bi-book"></i> Knowledge Base</a>
    <a href="/admin/feedback"><i class="bi bi-chat-left-dots"></i> Feedback</a>
    <a href="/admin/settings"><i class="bi bi-gear"></i> Settings</a>
    <a href="/admin/logout"><i class="bi bi-box-arrow-right"></i> Logout</a>
  </div>

  <!-- Main Content -->
  <div class="main">
    <div class="container">
      <h3 class="mb-4"><i class="bi bi-book"></i> Knowledge Base Management</h3>

      <form method="POST" action="/admin/add_tip">
        <div class="row g-3 mb-3">
          <div class="col-md-3">
            <input type="text" name="category" class="form-control" placeholder="Category" required>
          </div>
          <div class="col-md-3">
            <input type="text" name="subtopic" class="form-control" placeholder="Subtopic" required>
          </div>
          <div class="col-md-4">
            <input type="text" name="tip" class="form-control" placeholder="Add new wellness tip..." required>
          </div>
          <div class="col-md-2">
            <button class="btn btn-custom w-100" type="submit"><i class="bi bi-plus-circle"></i> Add</button>
          </div>
        </div>
      </form>

      <table class="table table-bordered bg-white shadow-sm">
        <thead class="table-success">
          <tr>
            <th>ID</th>
            <th>Category</th>
            <th>Subtopic</th>
            <th>Tip</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
          <tr>
            <td>{{ row[0] }}</td>
            <td>{{ row[1] }}</td>
            <td>{{ row[2] }}</td>
            <td>{{ row[3] }}</td>
            <td>
              <form method="POST" action="/admin/delete_tip/{{ row[0] }}" onsubmit="return confirm('Delete this tip?')">
                <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
